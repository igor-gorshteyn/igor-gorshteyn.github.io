(function(t){function e(e){for(var s,a,r=e[0],c=e[1],d=e[2],u=0,m=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},n={app:0},o=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0025":function(t,e,i){},"04ce":function(t,e,i){"use strict";var s=i("a3db"),n=i.n(s);n.a},"21bb":function(t,e,i){"use strict";var s=i("2dad"),n=i.n(s);n.a},"237e":function(t,e,i){},"2dad":function(t,e,i){},"30db":function(t,e,i){"use strict";var s=i("0025"),n=i.n(s);n.a},"456a":function(t,e,i){"use strict";var s=i("6752"),n=i.n(s);n.a},"4d12":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",attrs:{id:"app"}},[i("div",{staticClass:"d-flex justify-content-between navigation-wrap"},[i("Navigation"),i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:0===t.currentIndex},on:{click:t.cancel}},[t._v("Отменить действие")]),i("button",{staticClass:"btn btn-primary",attrs:{disabled:t.currentIndex===t.history.length-1},on:{click:t.forward}},[t._v("Вперед")])])],1),i("router-view"),i("Modal")],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-container",class:{active:t.visible}},[i("div",{staticClass:"modal"},[i("div",{staticClass:"modal-title mb-1 mt-1"},[i("p",[t._v("Вы действительно хотите "+t._s(t.title)+" элемент?")])]),i("div",{staticClass:"modal-control btn-wrap "},[i("button",{staticClass:"btn btn-success",on:{click:t.successHandler}},[t._v("Да")]),i("button",{staticClass:"btn btn-danger",on:{click:t.closeModal}},[t._v("Нет")])])])])},r=[];const c=new s["a"]({methods:{modal(t,e){this.$emit(t,e)}}}),d={install(t){t.prototype.$modal=function(t,e){c.modal(t,e)}}};s["a"].use(d);const l={delete:"delete-item",edit:"edit-item"},u={id:null,text:null,checked:null};var m={name:"Modal",data:()=>({direction:null,title:null,visible:!1,editItem:u,deleteItemById:null}),methods:{toggleVisible(){this.visible=!this.visible},successHandler(){"delete"===this.direction?(this.$store.dispatch("deleteItem",this.deleteItemById),this.$router.push("/")):(this.$store.dispatch("editItem",this.editItem),this.$router.push("/")),this.closeModal()},clearData(){this.editItem=u,this.deleteItemById=null,this.title=null,this.direction=null},closeModal(){this.toggleVisible(),this.clearData()}},created(){c.$on(l.edit,t=>{this.toggleVisible(),this.title="изменить",this.direction="edit",this.editItem=t}),c.$on(l.delete,t=>{this.toggleVisible(),this.title="удалить",this.direction="delete",this.deleteItemById=t})},beforeDestroy(){c.$off(l.edit),c.$off(l.delete)}},h=m,p=(i("30db"),i("2877")),f=Object(p["a"])(h,a,r,!1,null,null,null),b=f.exports,v=i("8a5b");const x="my-todo-key";class g{static findTodoItems(){return JSON.parse(localStorage.getItem(x))}static writeTodoItems(t){localStorage.setItem(x,JSON.stringify(t))}}var y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("router-link",{attrs:{to:"/"}},[t._v("Главная")]),i("router-link",{attrs:{to:"/form"}},[t._v("Добавить")])],1)},k=[],_={name:"Navigation"},I=_,C=(i("a4e1"),Object(p["a"])(I,y,k,!1,null,null,null)),w=C.exports,$=i("2f62"),O={components:{Navigation:w,Modal:b},methods:{cancel(){this.$store.commit("historyBack")},forward(){this.$store.commit("forward")}},computed:{...Object($["c"])(["currentIndex","history"])},created(){const t=g.findTodoItems();this.$store.dispatch("addHistory",t||v)}},j=O,q=(i("5c0b"),Object(p["a"])(j,n,o,!1,null,null,null)),L=q.exports,D=i("8c4f"),T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h1",{staticClass:"mb-1"},[t._v("Список задач")]),i("TodoContainer")],1)},H=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-container"},t._l(t.items,(function(t){return i("TodoItem",{key:t.id,attrs:{prop:t}})})),1)},M=[],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-item-box"},[i("span",{staticClass:"icon material-icons",class:t.prop.checked?"color-success":"color-danger"},[t._v(" "+t._s(t.prop.checked?"done":"close")+" ")]),i("div",{staticClass:"text-wrap"},[i("p",[t._v(t._s(t.prop.text))])]),i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{title:"Изменить задачу"},on:{click:t.changeItem}},[i("i",{staticClass:"material-icons"},[t._v("edit")])])])])},E=[],N={name:"TodoItem",props:["prop"],components:{},methods:{changeItem(){this.$router.push({path:"/form",query:{id:this.prop.id}})}}},B=N,J=(i("456a"),Object(p["a"])(B,P,E,!1,null,null,null)),A=J.exports,V={name:"TodoContainer",components:{TodoItem:A},computed:{...Object($["b"])(["items"])}},F=V,z=(i("9af4"),Object(p["a"])(F,S,M,!1,null,null,null)),G=z.exports,K={name:"Home",components:{TodoContainer:G}},Q=K,R=(i("21bb"),Object(p["a"])(Q,T,H,!1,null,null,null)),U=R.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{staticClass:"mb-1"},[t._v(t._s("edit"===t.current?"Редактировать":"Добавить"))]),i("div",[i("div",{staticClass:"d-flex justify-content-between align-items-center mb-1"},[i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"btn btn-success material-icons",class:{"btn-current":"edit"===t.current},attrs:{disabled:t.form.text.length<t.valueLength,title:"Сохранить"},on:{click:t.sendForm}},[t._v("save")]),i("button",{staticClass:"btn btn-danger",attrs:{title:"Удалить"},on:{click:t.deleteItem}},[i("i",{staticClass:"material-icons"},[t._v("delete")])]),"add"===t.current?i("button",{staticClass:"btn btn-primary",attrs:{disabled:0===t.form.text.length,title:"Очистить"},on:{click:t.clear}},[i("i",{staticClass:"material-icons"},[t._v("backspace")])]):t._e()]),t.form.text.length<t.valueLength?i("p",{staticClass:"color-danger ml-1 mb-1"},[t._v("Минимальная длина "+t._s(t.valueLength)+" символов")]):t._e()]),"edit"===t.current?i("div",{staticClass:"checkbox-wrap mb-1"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.checked,expression:"form.checked"}],attrs:{type:"checkbox",id:t.form.id},domProps:{checked:t.form.checked,checked:Array.isArray(t.form.checked)?t._i(t.form.checked,null)>-1:t.form.checked},on:{change:function(e){var i=t.form.checked,s=e.target,n=!!s.checked;if(Array.isArray(i)){var o=null,a=t._i(i,o);s.checked?a<0&&t.$set(t.form,"checked",i.concat([o])):a>-1&&t.$set(t.form,"checked",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(t.form,"checked",n)}}}),i("label",{attrs:{for:t.form.id}},[i("span",{class:t.form.checked?"color-success":"color-danger"},[t._v("Задача "+t._s(t.form.checked?"выполнена":"не выполнена"))])])]):t._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.text,expression:"form.text"}],staticClass:"textarea",class:{"area-danger":t.form.text.length<t.valueLength},domProps:{value:t.form.text},on:{input:function(e){e.target.composing||t.$set(t.form,"text",e.target.value)}}})])])},X=[],Y=i("ec26"),Z={name:"EditPage",data:()=>({valueLength:6,current:"",form:{text:"",checked:!1,id:null}}),computed:{...Object($["b"])(["items"])},created(){const t=this.$route.query.id;void 0!==t?(this.current="edit",this.form={...this.items.find(e=>e.id===t)}):this.current="add"},methods:{clear(){this.form.text=""},deleteItem(){this.$modal(l.delete,this.form.id)},sendForm(){const{text:t,checked:e}=this.form,i={checked:e,text:t,id:this.form.id?this.form.id:Object(Y["a"])()};"edit"===this.current?this.$modal(l.edit,i):(this.$store.dispatch("addItem",i),this.form.text="")}}},tt=Z,et=(i("04ce"),Object(p["a"])(tt,W,X,!1,null,null,null)),it=et.exports;s["a"].use(D["a"]);const st=[{path:"/",name:"Home",component:U},{path:"/form",name:"Form",component:it}],nt=new D["a"]({mode:"history",base:"/",routes:st});var ot=nt;s["a"].use($["a"]);const at=new $["a"].Store({state:{currentIndex:0,history:[]},getters:{items:t=>t.history[t.currentIndex]},mutations:{addHistory(t,e){t.history=[...e],t.currentIndex+=1},editHistory(t,e){t.history=[...t.history,[...e]],t.currentIndex=t.history.length-1},historyBack(t){t.currentIndex>=0&&(t.currentIndex-=1)},forward(t){t.history.length-1!==t.currentIndex&&(t.currentIndex+=1)}},actions:{addHistory({commit:t,state:e},i){t("editHistory",i)},addItem({commit:t,state:e},i){const s=[...e.history[e.currentIndex],i];t("editHistory",s)},editItem({commit:t,state:e},i){const s=e.history[e.currentIndex].filter(t=>t.id!==i.id);t("editHistory",[...s,i])},deleteItem({commit:t,state:e},i){const s=e.history[e.currentIndex].filter(t=>t.id!==i);t("editHistory",s)}}});at.subscribe((t,{history:e,currentIndex:i})=>{g.writeTodoItems(e[i])}),s["a"].config.productionTip=!1,new s["a"]({router:ot,store:at,render:t=>t(L)}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},6752:function(t,e,i){},"8a5b":function(t){t.exports=JSON.parse('[{"id":"0","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"1","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"2","checked":false,"text":"Отдахнуть"},{"id":"3","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"4","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"5","checked":false,"text":"Отдахнуть"},{"id":"6","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"7","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"8","checked":false,"text":"Отдахнуть"},{"id":"9","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"10","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"11","checked":false,"text":"Отдахнуть"},{"id":"12","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"13","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"14","checked":false,"text":"Отдахнуть"}]')},"9af4":function(t,e,i){"use strict";var s=i("237e"),n=i.n(s);n.a},"9c0c":function(t,e,i){},a3db:function(t,e,i){},a4e1:function(t,e,i){"use strict";var s=i("4d12"),n=i.n(s);n.a}});
//# sourceMappingURL=app.42047010.js.map