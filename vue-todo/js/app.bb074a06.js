(function(t){function e(e){for(var s,o,a=e[0],c=e[1],l=e[2],u=0,m=[];u<a.length;u++)o=a[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],s=!0,a=1;a<i.length;a++){var c=i[a];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var d=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0025":function(t,e,i){},"04ce":function(t,e,i){"use strict";var s=i("a3db"),n=i.n(s);n.a},"21bb":function(t,e,i){"use strict";var s=i("2dad"),n=i.n(s);n.a},"237e":function(t,e,i){},"2dad":function(t,e,i){},"30db":function(t,e,i){"use strict";var s=i("0025"),n=i.n(s);n.a},"456a":function(t,e,i){"use strict";var s=i("6752"),n=i.n(s);n.a},"4d12":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",attrs:{id:"app"}},[i("div",{staticClass:"d-flex justify-content-between navigation-wrap"},[i("Navigation"),i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:0===t.currentIndex},on:{click:t.cancel}},[t._v("Отменить действие")]),i("button",{staticClass:"btn btn-primary",attrs:{disabled:t.currentIndex===t.history.length-1},on:{click:t.forward}},[t._v("Вперед")])])],1),i("router-view"),i("Modal")],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-container",class:{active:t.visible}},[i("div",{staticClass:"modal"},[i("div",{staticClass:" d-flex justify-content-end"},[i("Close",{staticClass:"cur-p",on:{click:t.closeModal}})],1),i("div",{staticClass:"modal-title mb-1 mt-1"},[i("p",[t._v("Вы действительно хотите "+t._s(t.title)+" элемент?")])]),i("div",{staticClass:"modal-control btn-wrap "},[i("button",{staticClass:"btn btn-success",on:{click:t.successHandler}},[t._v("Да")]),i("button",{staticClass:"btn btn-danger",on:{click:t.closeModal}},[t._v("Нет")])])])])},a=[];const c=new s["a"]({methods:{modal(t,e){this.$emit(t,e)}}}),l={install(t){t.prototype.$modal=function(t,e){c.modal(t,e)}}},d={delete:"delete-item",edit:"edit-item"};var u=i("7eb5");const m={id:null,text:null,checked:null};var h={name:"Modal",components:{Close:u["a"]},data:()=>({direction:null,title:null,visible:!1,editItem:m,deleteItemById:null}),methods:{toggleVisible(){this.visible=!this.visible},successHandler(){"delete"===this.direction?this.$store.dispatch("deleteItem",this.deleteItemById):(this.$store.dispatch("editItem",this.editItem),this.$router.push("/")),this.closeModal()},clearData(){this.editItem=m,this.deleteItemById=null,this.title=null,this.direction=null},closeModal(){this.toggleVisible(),this.clearData()}},created(){c.$on(d.edit,t=>{this.toggleVisible(),this.title="изменить",this.direction="edit",this.editItem=t}),c.$on(d.delete,t=>{this.toggleVisible(),this.title="удалить",this.direction="delete",this.deleteItemById=t})},beforeDestroy(){c.$off(d.edit),c.$off(d.delete)}},f=h,p=(i("30db"),i("2877")),b=Object(p["a"])(f,o,a,!1,null,null,null),v=b.exports,y=i("8a5b");const g="my-todo-key";class x{static findTodoItems(){return JSON.parse(localStorage.getItem(g))}static writeTodoItems(t){localStorage.setItem(g,JSON.stringify(t))}}var k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("router-link",{attrs:{to:"/"}},[t._v("Главная")]),i("router-link",{attrs:{to:"/form"}},[t._v("Добавить")])],1)},I=[],_={name:"Navigation"},C=_,w=(i("a4e1"),Object(p["a"])(C,k,I,!1,null,null,null)),$=w.exports,O=i("2f62"),j={components:{Navigation:$,Modal:v},methods:{cancel(){this.$store.commit("historyBack")},forward(){this.$store.commit("forwardBack")}},computed:{...Object(O["c"])(["currentIndex","history"])},created(){const t=x.findTodoItems();this.$store.dispatch("addHistory",t||y)}},T=j,H=(i("5c0b"),Object(p["a"])(T,n,r,!1,null,null,null)),M=H.exports,S=i("8c4f"),P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h1",{staticClass:"mb-1"},[t._v("Список задач")]),i("TodoContainer")],1)},B=[],E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-container"},t._l(t.items,(function(t){return i("TodoItem",{key:t.id,attrs:{prop:t}})})),1)},N=[],L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"todo-item-box"},[i(t.prop.checked?"Check":"Close",{tag:"component",staticClass:"icon",class:t.prop.checked?"color-success":"color-danger"}),i("div",{staticClass:"text-wrap"},[i("p",[t._v(t._s(t.prop.text))])]),i("div",{staticClass:"btn-wrap"},[i("button",{staticClass:"btn btn-primary",on:{click:t.changeItem}},[t._v("Изменить")]),i("button",{staticClass:"btn btn-danger",on:{click:t.deleteItem}},[t._v("Удалить")])])],1)},q=[],D=i("406a"),J={name:"TodoItem",props:["prop"],components:{Close:u["a"],Check:D["a"]},methods:{deleteItem(){this.$modal(d.delete,this.prop.id)},changeItem(){this.$router.push({path:"/form",query:{id:this.prop.id}})}}},A=J,V=(i("456a"),Object(p["a"])(A,L,q,!1,null,null,null)),F=V.exports,z={name:"TodoContainer",components:{TodoItem:F},computed:{...Object(O["b"])(["items"])}},G=z,K=(i("9af4"),Object(p["a"])(G,E,N,!1,null,null,null)),Q=K.exports,R={name:"Home",components:{TodoContainer:Q}},U=R,W=(i("21bb"),Object(p["a"])(U,P,B,!1,null,null,null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{staticClass:"mb-1"},[t._v(t._s("edit"===t.current?"Редактировать":"Добавить"))]),i("div",[i("div",{staticClass:"d-flex justify-content-between align-items-center mb-1"},["edit"===t.current?i("div",{staticClass:"checkbox-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.checked,expression:"form.checked"}],attrs:{type:"checkbox",id:t.form.id},domProps:{checked:t.form.checked,checked:Array.isArray(t.form.checked)?t._i(t.form.checked,null)>-1:t.form.checked},on:{change:function(e){var i=t.form.checked,s=e.target,n=!!s.checked;if(Array.isArray(i)){var r=null,o=t._i(i,r);s.checked?o<0&&t.$set(t.form,"checked",i.concat([r])):o>-1&&t.$set(t.form,"checked",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.form,"checked",n)}}}),i("label",{attrs:{for:t.form.id}},[i("span",{class:t.form.checked?"color-success":"color-danger"},[t._v("Задача "+t._s(t.form.checked?"выполнена":"не выполнена"))])])]):t._e(),i("button",{staticClass:"btn btn-primary",class:{"btn-current":"edit"===t.current},attrs:{disabled:t.form.text.length<t.valueLength},on:{click:t.sendForm}},[t._v("Сохранить")]),t.form.text.length<t.valueLength?i("span",{staticClass:"color-danger"},[t._v("Минимальная длина "+t._s(t.valueLength)+" символов")]):t._e()]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.text,expression:"form.text"}],staticClass:"textarea",class:{"area-danger":t.form.text.length<t.valueLength},domProps:{value:t.form.text},on:{input:function(e){e.target.composing||t.$set(t.form,"text",e.target.value)}}})])])},Z=[],tt=i("ec26"),et={name:"EditPage",data:()=>({valueLength:6,current:"",form:{text:"",checked:!1,id:null}}),computed:{...Object(O["b"])(["items"])},created(){const t=this.$route.query.id;void 0!==t?(this.current="edit",this.form={...this.items.find(e=>e.id===t)}):this.current="add"},methods:{sendForm(){const{text:t,checked:e}=this.form,i={checked:e,text:t,id:this.form.id?this.form.id:Object(tt["a"])()};"edit"===this.current?this.$modal(d.edit,i):(this.$store.dispatch("addItem",i),this.form.text="")}}},it=et,st=(i("04ce"),Object(p["a"])(it,Y,Z,!1,null,null,null)),nt=st.exports;s["a"].use(S["a"]);const rt=[{path:"/",name:"Home",component:X},{path:"/form",name:"Form",component:nt}],ot=new S["a"]({mode:"history",base:"/",routes:rt});var at=ot;s["a"].use(O["a"]);const ct=new O["a"].Store({state:{currentIndex:0,history:[]},getters:{items:t=>t.history[t.currentIndex]},mutations:{addHistory(t,e){t.history=[...e],t.currentIndex+=1},editHistory(t,e){t.history=[...t.history,[...e]],t.currentIndex=t.history.length-1},historyBack(t){t.currentIndex>0&&(t.currentIndex-=1)},forwardBack(t){t.history.length-1!==t.currentIndex&&(t.currentIndex+=1)}},actions:{addHistory({commit:t,state:e},i){t("editHistory",i)},addItem({commit:t,state:e},i){const s=[...e.history[e.currentIndex],i];t("editHistory",s)},editItem({commit:t,state:e},i){const s=e.history[e.currentIndex].filter(t=>t.id!==i.id);t("editHistory",[...s,i])},deleteItem({commit:t,state:e},i){const s=e.history[e.currentIndex].filter(t=>t.id!==i);t("editHistory",s)}}});ct.subscribe((t,{history:e,currentIndex:i})=>{x.writeTodoItems(e[i])});i("d48d");s["a"].use(l),s["a"].config.productionTip=!1,new s["a"]({router:at,store:ct,render:t=>t(M)}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},6752:function(t,e,i){},"8a5b":function(t){t.exports=JSON.parse('[{"id":"0","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"1","checked":false,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Distinctio est impedit minima modi nam, necessitatibus possimus quia sed sequi vitae."},{"id":"2","checked":false,"text":"Отдахнуть"}]')},"9af4":function(t,e,i){"use strict";var s=i("237e"),n=i.n(s);n.a},"9c0c":function(t,e,i){},a3db:function(t,e,i){},a4e1:function(t,e,i){"use strict";var s=i("4d12"),n=i.n(s);n.a}});
//# sourceMappingURL=app.bb074a06.js.map